<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stack Visualizer</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wdth,wght@0,75..100,100..900;1,75..100,100..900&display=swap" rel="stylesheet">
</head>
<body>

    <h1>Stack Visualizer</h1>
    <div class="grid-container">
        <div class="left-container">
            <canvas id="stackCanvas" width="300" height="550"></canvas>
        <br>
        <input type="number" id="stack-input" class="input-value" placeholder="Enter a number"><br>
        <button class="push-btn" onclick="pushElement()">Push</button>
        <button class="pop-btn" onclick="popElement()">Pop</button><br>
        <button class="clear-btn" onclick="clearLog()">Clear log</button>
        </div>
        <div class="right-container">
            <h2>Steps</h2>
        <div id="log" class="log"></div>
        </div>
    </div>

    <script>
        // Get Canvas Context
       
        const canvas = document.getElementById("stackCanvas");
        const ctx = canvas.getContext("2d");
        let logContent = document.getElementById("log");

        // Stack Data
        let stack = [];
        const boxHeight = 50; // Height of each stack element
        const maxStackSize = 10; // Max elements to fit in canvas

            
        // Function to Draw Stack
        function drawStack(highlightIndex = -1, highlightColor = "blue") {
            ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear canvas

            for (let i = 0; i < stack.length; i++) {
                let color = (i === highlightIndex) ? highlightColor : "blue"; // Highlight if index matches
                
                ctx.fillStyle = color;
                ctx.fillRect(50, canvas.height - (i + 1) * boxHeight - 10, 200, boxHeight);
                ctx.strokeStyle = "black";
                ctx.strokeRect(50, canvas.height - (i + 1) * boxHeight - 10, 200, boxHeight);

                ctx.fillStyle = "white";
                ctx.font = "bold 20px Poppins";
                ctx.textAlign = "center";      // Centers text horizontally
                ctx.textBaseline = "middle";   // Centers text vertically
                ctx.fillText(stack[i],canvas.width / 2, canvas.height - (i * boxHeight) - 35);
                
            }
        }

        function pushElement() {
            let value = document.getElementById("stack-input").value;
            if (value === "") return alert("Enter a value!");
            if (value >= 999999999999999) return alert("its too big")

            if (stack.length < maxStackSize) {
                stack.push(value);
                drawStack(stack.length - 1, "green"); // Highlight new top element in green
            } else {
                alert("Stack Overflow! Can't push more.");
            }
            logContent.innerText += `${value} is Added to the stack \n`; 
        }

        function popElement() {
            if (stack.length > 0) {
                let poppedIndex = stack.length - 1; // Get top index
                
                logContent.innerText += `${stack[poppedIndex]} is Removed from the stack \n`; 
                // Step 1: Highlight popped element in red
                drawStack(poppedIndex, "red");

                // Step 2: Remove after delay
                setTimeout(() => {
                    stack.pop();
                    drawStack(stack.length - 1, "green");  // Redraw stack after popping
                }, 300); // 300ms delay
            } else {
                alert("Stack Underflow! No elements left.");
            }}

            function clearLog(){
                logContent.innerHTML ='';
            }


            drawStack();// Initial call to draw empty stack
    </script>

</body>
</html>
